 Hello all. For my sins, I'm trying to set up an IPSec VPN on an Ubuntu 10.10 Server machine. I'm using OpenSWAN (+ NETKEY, just the default setup).
 So first I'm trying to set up a basic IPSec connection for test purposes, roughly following the instructions in the OpenSWAN book ( http://www.packtpub.com/openswan/book ).
 The book suggests that an RSA key should be automatically generated during openswan installation, except on Gentoo where the install is half-broken.
 Thing is, it seems that no RSA key has been generated during openswan installation on Ubuntu 10.10 either. /etc/ipsec.secrets contains the lineinclude /var/lib/openswan/ipsec.secrets.inc
 /var/lib/ipsec.secrets.inc doesn't exist.
 And then, when I attempt to create an RSA key using sudo ipsec newhostkey (the method recommended for Gentoo installs by the openswan book) nothing happens.
 The rsasigkey process just seems to stall, using 0 processor and memory (according to top).
 escott: Probably, though I'm not sure what key length etc. I need. Apparently I can also just try using a PSK password rather than an RSA key. But I was hoping I would be able to get a basic ipsec connection up  as a test before I had to start worrying about crypto settings. :(
 escott: http://ubuntuforums.org/showthread.php?t=1441977 suggests it might be due to to a lack of randomness. But I've logged in to the console of the server and hammered on tetris for a few minutes, and still the thing doesn't seem to make any progress. So either the 10.10 openswan package is bugged or I don'k know enoguh about keeping /dev/random full.
 escott: seems likely.
 escott: sudo cat  /proc/sys/kernel/random/entropy_avail gives me 135
 escott: The openswan book suggests that OpenSWAN does a 2192-bit RSA key by default.
 escott: A Google search seems to suggest that the unit is bits. Yes, that's what man random says too, I think.
 escott: Do you know how I can check what my sources of entropy are? man random says to use  sysctl kern.random but that gets me the message "error: "kern.random" is an unknown key"
 escott: I actually used the local console (not SSH/telnet) to play tetris for just that reason. Maybe I just need to play longer. Not the worst thing to have to do. :) If that doesn't work I'll have a look at some of the alternative sources.
 escott: That did it! I got up to about 2500 bits and blasted the 2192-bit key through before it could drop again. For some reason the buffer runs down quickly until it gets down to about the 100-200 bit range where it bounces around.
 escott: Good question: lsof /dev/random return an empty list here for me. Thank you for your help!
